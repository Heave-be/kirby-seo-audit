(function(){"use strict";const a=window.Vue;function E(){return window.panel}function D(){return E().api}function he(){const r=D();return{load:({parent:t,name:e})=>r.get(`${t}/sections/${e}`)}}function Y(){var n;return((n=a.getCurrentInstance())==null?void 0:n.proxy).$store}const T=a.computed;a.customRef,a.defineAsyncComponent,a.defineComponent,a.effectScope,a.getCurrentInstance,a.getCurrentScope,a.h,a.inject,a.isProxy,a.isReactive,a.isReadonly,a.isRef,a.isShallow,a.markRaw,a.nextTick,a.onActivated,a.onBeforeMount,a.onBeforeUnmount,a.onBeforeUpdate,a.onDeactivated,a.onErrorCaptured,a.onMounted,a.onRenderTracked,a.onRenderTriggered,a.onScopeDispose,a.onServerPrefetch,a.onUnmounted,a.onUpdated,a.provide,a.proxyRefs,a.reactive,a.readonly;const v=a.ref;a.shallowReactive,a.shallowReadonly,a.shallowRef,a.toRaw,a.toRef,a.toRefs,a.triggerRef,a.unref,a.useAttrs,a.useCssModule,a.useCssVars,a.useListeners,a.useSlots;const pe=a.watch;a.watchEffect,a.watchPostEffect,a.watchSyncEffect;const ye={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function P(r,n,t,e,s,i,l,d){var o=typeof r=="function"?r.options:r;return n&&(o.render=n,o.staticRenderFns=t,o._compiled=!0),{exports:r,options:o}}const N={en:{"modal.info":"Thanks for purchasing {label}! Please enter your email address and order ID to activate your license.","modal.fields.orderId.help":'<a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Get your order number</a> from Lemon Squeezy or <a href="mailto:hello@kirby.tools">contact us</a> if you cannot find it.',"modal.error.required.fields":"Email address and order ID are required","modal.error.invalid.licenseKey":"License key invalid for this plugin",activate:"Activate",activated:"Plugin activated"},de:{"modal.info":"Dankeschön für den Kauf von {label}! Bitte gib deine E-Mail-Adresse und Bestellnummer ein, um deine Lizenz zu aktivieren.","modal.fields.orderId.help":'Rufe die <a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Bestellnummer von Lemon Squeezy ab</a> oder <a href="mailto:hello@kirby.tools">kontaktiere uns</a>, wenn du sie nicht finden kannst.',"modal.error.required.fields":"E-Mail-Adresse und Bestellnummer sind notwendig","modal.error.invalid.licenseKey":"Lizenzschlüssel ungültig für dieses Plugin",activate:"Aktivieren",activated:"Plugin aktiviert"},fr:{"modal.info":"Merci d'avoir acheté {label} ! Veuillez saisir votre adresse e-mail et votre numéro de commande pour activer votre licence.","modal.fields.orderId.help":'Obtenez votre numéro de commande sur <a href="https://app.lemonsqueezy.com/my-orders" target="_blank">Lemon Squeezy</a> ou <a href="mailto:hello@kirby.tools">contactez-nous</a> si vous ne le trouvez pas.',"modal.error.required.fields":"Adresse e-mail et numéro de commande requis","modal.error.invalid.licenseKey":"Clé de licence invalide pour ce plugin",activate:"Activer",activated:"Plugin activé"}};function B(r,n,t){var l;const s=E().translation.code,i=((l=N==null?void 0:N[s])==null?void 0:l[r])??t;if(i)return n?ge(i,n):i}function ge(r,n,t){return r.replace(/\{(\w+)\}/g,(e,s)=>n[s]||s)}const me=["localhost","127.0.0.1","[::1]"],ve=["local","test","ddev.site"];function _e({label:r,apiNamespace:n}){const t=E(),e=D(),s=be(),i=async(d,o)=>{if(!d||!o)throw new Error("Email and order ID are required");const u=await e.post(`${n}/register`,{email:d,orderId:o});if((u==null?void 0:u.status)!=="ok")throw new Error("Registration failed");return!0};return{isLocalhost:s,openLicenseModal:()=>{let d=!1;return new Promise(o=>{t.dialog.open({component:"k-form-dialog",props:{submitButton:{icon:"check",theme:"love",text:B("activate",{label:r})},fields:{info:{type:"info",text:B("modal.info",{label:r})},email:{label:t.t("email"),type:"email"},orderId:{label:"Order ID",type:"text",help:B("modal.fields.orderId.help",{label:r})}}},on:{close:()=>{o({isRegistered:d})},submit:async u=>{const{email:h,orderId:f}=u;if(!h||!f){t.notification.error(B("modal.error.required.fields"));return}try{await i(h,Number(f))}catch(c){let g=c.message;g==="License key not valid for this plugin"&&(g=B("modal.error.invalid.licenseKey")),t.notification.error(g);return}d=!0,t.dialog.close(),t.notification.success(B("activated"),{label:r})}}})})}}}function be(){const{hostname:r}=window.location,n=me.includes(r),t=ve.some(e=>r.endsWith(`.${e}`));return n||t}const Se=["TaxonomyTextLengthAssessment","UrlLengthAssessment","UrlStopWordsAssessment","SingleH1Assessment"],ke={FleschReadingEaseAssessment:"fleschReading",SentenceLengthInTextAssessment:"sentenceLength"},we=["FunctionWordsInKeyphraseAssessment","IntroductionKeywordAssessment","KeyphraseLengthAssessment","KeywordDensityAssessment","KeyphraseDistributionAssessment","MetaDescriptionKeywordAssessment","SubheadingsKeywordAssessment","TitleKeywordAssessment","UrlKeywordAssessment"],O=Object.freeze({af:"af-ZA",ar:"ar-SA",az:"az-Latn-AZ",be:"be-BY",bg:"bg-BG",ca:"ca-ES",cs:"cs-CZ",da:"da-DK",de:"de-DE",dv:"dv-MV",el:"el-GR",en:"en-US",es:"es-ES",et:"et-EE",eu:"eu-ES",fa:"fa-IR",fi:"fi-FI",fo:"fo-FO",fr:"fr-FR",gl:"gl-ES",gu:"gu-IN",he:"he-IL",hi:"hi-IN",hr:"hr-HR",hu:"hu-HU",hy:"hy-AM",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",ka:"ka-GE",kk:"kk-KZ",kn:"kn-IN",ko:"ko-KR",kok:"kok-IN",ky:"ky-KG",lt:"lt-LT",lv:"lv-LV",mk:"mk-MK",mn:"mn-MN",mr:"mr-IN",ms:"ms-MY",nl:"nl-NL",no:"nb-NO",pa:"pa-IN",pl:"pl-PL",pt:"pt-BR",ro:"ro-RO",ru:"ru-RU",sa:"sa-IN",sk:"sk-SK",sl:"sl-SI",sq:"sq-AL",sr:"sr-Latn-CS",sv:"sv-SE",sw:"sw-KE",syr:"syr-SY",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",tt:"tt-RU",uk:"uk-UA",ur:"ur-PK",uz:"uz-Latn-UZ",vi:"vi-VN"}),Ae=["error","warn","info","debug"],xe="kirby$seo-audit$";class Re{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",2:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(n){return n<1?console.error:console.log}log(n){const t=this._getLogFn(n.level),e=n.type==="log"?"":n.type,s=n.tag||"",l=`
  background: ${this.typeColorMap[n.type]||this.levelColorMap[n.level]||this.defaultColor};
  border-radius: 0.5em;
  color: white;
  font-weight: bold;
  padding: 2px 0.5em;
`.trimStart(),d=`%c${[s,e].filter(Boolean).join(":")}`;typeof n.args[0]=="string"?t(`${d}%c ${n.args[0]}`,l,"",...n.args.slice(1)):t(d,l,...n.args)}}const Le={error:0,warn:1,info:2};function Ee(r){const n=new Re;return new Proxy({},{get(t,e){return(...s)=>{n.log({level:Le[e],type:e,tag:r,args:s})}}})}let Be;function ze(){return Be??(Be=Ee("seo-audit"))}let $=[];const j=new Map;async function Ce(r){if(!Array.isArray(r))throw new TypeError("Expected an array of assets");$.length>0||($=r)}function Te(r){if($.length===0)throw new Error("Plugin assets are not registered");const n=$.find(t=>t.filename===r);if(!n)throw new Error(`Plugin asset "${r}" not found`);return n}async function M(r){if(r.endsWith(".js")||(r+=".js"),j.has(r))return j.get(r);const t=await import(Te(r).url);return j.set(r,t),t}async function J(r){const n=await r;return n.default||n}var Z={};Object.defineProperty(Z,"__esModule",{value:!0});var q=Z.default={sentenceLength:{recommendedWordCount:20,slightlyTooMany:25,farTooMany:30},fleschReading:{borders:{veryEasy:90,easy:80,fairlyEasy:70,okay:60,fairlyDifficult:50,difficult:30,veryDifficult:0},scores:{veryEasy:9,easy:9,fairlyEasy:9,okay:9,fairlyDifficult:6,difficult:3,veryDifficult:3}}};const Oe={AltAttributeAssessment:{_label:"Alt-Attribut für Bilder",na:"Der Text enthält keine Bilder.",none:"Keines der {imagesWithoutAltAttribute} Bilder enthält ein Attribut für alternativen Text. Fügen Sie sie hinzu!",some:"Einige der {imagesWithoutAltAttribute} Bilder enthalten ein Attribut für alternativen Text. Fügen Sie sie hinzu!",every:"Alle Bilder enthalten ein Attribut für alternativen Text. Gute Arbeit!"},HeadingStructureOrderAssessment:{_label:"Reihenfolge der Überschriften",sequential:"Die Überschriftenstruktur ist in sequenzieller Reihenfolge. Gute Arbeit!",nonSequential:"Die Überschriftenstruktur ist nicht in sequenzieller Reihenfolge. Korrigieren Sie Ihre Überschriftenstruktur!"},SingleH1Assessment:{_label:"Einzelne H1",one:"Der Text enthält einen H1-Tag. Gute Arbeit!",multiple:"Der Text enthält mehrere H1-Tags. Überdenken Sie Ihre Überschriftenstruktur!",none:"Der Text enthält keinen H1-Tag. Fügen Sie ihn hinzu!"}},$e={AltAttributeAssessment:{_label:"Image alt attribute",na:"The text doesn't contain any images.",none:"None of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",some:"Some of the {imagesWithoutAltAttribute} images contain an alternative text attribute. Add them!",every:"All images contain an alternative text attribute. Good job!"},HeadingStructureOrderAssessment:{_label:"Heading structure",sequential:"The heading structure is in sequential order. Good job!",nonSequential:"The heading structure is not in sequential order. Fix your heading structure!"},SingleH1Assessment:{_label:"Single H1",one:"The text contains a single H1 tag. Good job!",multiple:"The text contains multiple H1 tags. Rethink your heading structure!",none:"The text contains no H1 tag. Add it!"}};function X(r,n,t){if(!r)return t;let e,s;if(Array.isArray(n)?e=[...n]:typeof n=="string"?e=n.split("."):typeof n=="symbol"&&(e=[n]),!Array.isArray(e))throw new TypeError(`Expected props to be an array, a string or a symbol, got ${typeof e}`);for(;e.length;)if(s=e.shift(),!r||(r=r[s],r===void 0))return t;return r}function Me(r,n,t){return r.replace(/\{(\w+)\}/g,(e,s)=>n[s.toLowerCase()]||s)}function Ie({htmlDocument:r,contentSelector:n}){const t=U(`${n} h1`,r);return{score:t.length===1?9:3,translation:t.length===1?"one":t.length>1?"multiple":"none"}}function He({htmlDocument:r,contentSelector:n}){const t=U(`${n} img`,r);if(t.length===0)return{score:9,translation:"na"};const s=t.filter(i=>i.getAttribute("alt")===null).length;return{score:s===t.length||s>0?3:9,translation:s===t.length?"none":s>0?"some":"every",...s>0&&{context:{imagesWithoutAltAttribute:s}}}}function Fe({htmlDocument:r,contentSelector:n}){const t=U(`${n} h1, ${n} h2, ${n} h3, ${n} h4, ${n} h5, ${n} h6`,r);let e=0;const s=[];for(const l of t){const d=Number.parseInt(l.tagName.substring(1),10);d-e>1&&s.push(l),e=d}const i=s.length===0;return{score:i?9:3,translation:i?"sequential":"nonSequential",...!i&&{details:{text:`<ul>${s.map(l=>`<li><strong>${l.tagName}</strong>: ${l.innerText}</li>`)}</ul>`}}}}function U(r,n){return Array.from(n.querySelectorAll(r))}const Q={de:Oe,en:$e},Ke={seo:{AltAttributeAssessment:He,HeadingStructureOrderAssessment:Fe,SingleH1Assessment:Ie}};function De({htmlDocument:r,contentSelector:n,assessments:t,locale:e}){const s=Q[e]||Q.en,i={};for(const[l,d]of Object.entries(Ke)){const o=[];for(const[u,h]of Object.entries(d)){if(t.length>0&&!t.includes(u.toLowerCase()))continue;const{score:f,translation:c,context:g={},details:m}=h({htmlDocument:r,contentSelector:n}),A=X(s,`${u}.${c}`);if(!A)continue;const S=X(s,`${u}._label`,u),_=Object.fromEntries(Object.entries(g).map(([k,w])=>[k.toLowerCase(),w]));o.push({score:f,rating:ee(f),text:`${S}: ${Me(A,_)}`,details:m})}i[l]=o}return i}async function Pe({htmlDocument:r,contentSelector:n,options:t,translations:e}){var c;const s=await M("yoastseo"),{Jed:i}=await M("jed"),l=await J(M("string-pixel-width")),d=((c=r.querySelector(n))==null?void 0:c.innerHTML)||"",o=new s.Paper(d,{keyword:t.keyword,synonyms:t.synonyms.join(","),url:new URL(t.url).pathname,permalink:t.url,title:t.title,titleWidth:t.title?l(t.title,{font:"arial",size:20}):void 0,description:t.description,locale:t.langCulture.replace("-","_")}),u=new s.Researcher(o),h=new i({domain:"js-text-analysis",locale_data:{"js-text-analysis":e||{"":{}}}}),f=Object.entries(s.assessments).reduce((g,[m,A])=>{for(const[S,_]of Object.entries(A))if(!Se.includes(S)&&!(!t.keyword&&t.assessments.length===0&&we.includes(S))&&!(t.assessments.length>0&&!t.assessments.includes(S.toLowerCase()))){if(typeof _=="object"&&Object.prototype.hasOwnProperty.call(_,"getResult")){const k=_.getResult(o,u,h);g[m].push(k)}else if(typeof _=="function"){const k=ke[S],w=(q==null?void 0:q[k])||{},z=new _(w).getResult(o,u,h);g[m].push(z)}}return g},{seo:[],readability:[]});for(const g of Object.keys(f))f[g]=f[g].filter(m=>m.text).map(m=>({score:m.score,rating:ee(m.score),text:m.text}));return f}function ee(r){return r===-1?"error":r===0?"feedback":r<=4?"bad":r<=7?"ok":r>7?"good":""}async function Ne(r){var l,d,o;const t=new DOMParser().parseFromString(r,"text/html");for(const u of Array.from(t.body.querySelectorAll("script, style")))u.remove();let e=t.documentElement.lang??O.en;e.includes("-")||(e=(O==null?void 0:O[e.toLowerCase()])??O.en);const s=t.title||((l=t.querySelector("h1"))==null?void 0:l.innerText)||((d=t.querySelector("h2"))==null?void 0:d.innerText)||"",i=((o=t.querySelector('meta[name="description"]'))==null?void 0:o.content)||"";return{htmlDocument:t,locale:e,title:s,description:i}}function je(){const r=E(),n=Y();return T(()=>n.getters["content/values"]()),{generateReport:async(e,s,i)=>{const l=await J(M("yoastseo-translations"));i.assessments=i.assessments.map(f=>{let c=f.toLowerCase();return c.endsWith("assessment")||(c+="assessment"),c});const d=r.translation.code,o={seo:[],readability:[]},u=De({htmlDocument:e,contentSelector:s,assessments:i.assessments,locale:d});for(const[f,c]of Object.entries(u))o[f]=o[f].concat(c);const h=await Pe({htmlDocument:e,contentSelector:s,options:i,translations:l[d]});for(const[f,c]of Object.entries(h))o[f]=o[f].concat(c);return o}}}const te=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function qe(r,n){n?n={...te,...n}:n=te;const t=se(n);return t.dispatch(r),t.toString()}const Ue=Object.freeze(["prototype","__proto__","constructor"]);function se(r){let n="",t=new Map;const e=s=>{n+=s};return{toString(){return n},getContext(){return t},dispatch(s){return r.replacer&&(s=r.replacer(s)),this[s===null?"null":typeof s](s)},object(s){if(s&&typeof s.toJSON=="function")return this.object(s.toJSON());const i=Object.prototype.toString.call(s);let l="";const d=i.length;d<10?l="unknown:["+i+"]":l=i.slice(8,d-1),l=l.toLowerCase();let o=null;if((o=t.get(s))===void 0)t.set(s,t.size);else return this.dispatch("[CIRCULAR:"+o+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(s))return e("buffer:"),e(s.toString("utf8"));if(l!=="object"&&l!=="function"&&l!=="asyncfunction")this[l]?this[l](s):r.ignoreUnknown||this.unkown(s,l);else{let u=Object.keys(s);r.unorderedObjects&&(u=u.sort());let h=[];r.respectType!==!1&&!re(s)&&(h=Ue),r.excludeKeys&&(u=u.filter(c=>!r.excludeKeys(c)),h=h.filter(c=>!r.excludeKeys(c))),e("object:"+(u.length+h.length)+":");const f=c=>{this.dispatch(c),e(":"),r.excludeValues||this.dispatch(s[c]),e(",")};for(const c of u)f(c);for(const c of h)f(c)}},array(s,i){if(i=i===void 0?r.unorderedArrays!==!1:i,e("array:"+s.length+":"),!i||s.length<=1){for(const o of s)this.dispatch(o);return}const l=new Map,d=s.map(o=>{const u=se(r);u.dispatch(o);for(const[h,f]of u.getContext())l.set(h,f);return u.toString()});return t=l,d.sort(),this.array(d,!1)},date(s){return e("date:"+s.toJSON())},symbol(s){return e("symbol:"+s.toString())},unkown(s,i){if(e(i),!!s&&(e(":"),s&&typeof s.entries=="function"))return this.array(Array.from(s.entries()),!0)},error(s){return e("error:"+s.toString())},boolean(s){return e("bool:"+s)},string(s){e("string:"+s.length+":"),e(s)},function(s){e("fn:"),re(s)?this.dispatch("[native]"):this.dispatch(s.toString()),r.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(s.name)),r.respectFunctionProperties&&this.object(s)},number(s){return e("number:"+s)},xml(s){return e("xml:"+s.toString())},null(){return e("Null")},undefined(){return e("Undefined")},regexp(s){return e("regex:"+s.toString())},uint8array(s){return e("uint8array:"),this.dispatch(Array.prototype.slice.call(s))},uint8clampedarray(s){return e("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(s))},int8array(s){return e("int8array:"),this.dispatch(Array.prototype.slice.call(s))},uint16array(s){return e("uint16array:"),this.dispatch(Array.prototype.slice.call(s))},int16array(s){return e("int16array:"),this.dispatch(Array.prototype.slice.call(s))},uint32array(s){return e("uint32array:"),this.dispatch(Array.prototype.slice.call(s))},int32array(s){return e("int32array:"),this.dispatch(Array.prototype.slice.call(s))},float32array(s){return e("float32array:"),this.dispatch(Array.prototype.slice.call(s))},float64array(s){return e("float64array:"),this.dispatch(Array.prototype.slice.call(s))},arraybuffer(s){return e("arraybuffer:"),this.dispatch(new Uint8Array(s))},url(s){return e("url:"+s.toString())},map(s){e("map:");const i=[...s];return this.array(i,r.unorderedSets!==!1)},set(s){e("set:");const i=[...s];return this.array(i,r.unorderedSets!==!1)},file(s){return e("file:"),this.dispatch([s.name,s.size,s.type,s.lastModfied])},blob(){if(r.ignoreUnknown)return e("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return e("domwindow")},bigint(s){return e("bigint:"+s.toString())},process(){return e("process")},timer(){return e("timer")},pipe(){return e("pipe")},tcp(){return e("tcp")},udp(){return e("udp")},tty(){return e("tty")},statwatcher(){return e("statwatcher")},securecontext(){return e("securecontext")},connection(){return e("connection")},zlib(){return e("zlib")},context(){return e("context")},nodescript(){return e("nodescript")},httpparser(){return e("httpparser")},dataview(){return e("dataview")},signal(){return e("signal")},fsevent(){return e("fsevent")},tlswrap(){return e("tlswrap")}}}const ne="[native code] }",We=ne.length;function re(r){return typeof r!="function"?!1:Function.prototype.toString.call(r).slice(-We)===ne}class R{constructor(n,t){n=this.words=n||[],this.sigBytes=t===void 0?n.length*4:t}toString(n){return(n||Ge).stringify(this)}concat(n){if(this.clamp(),this.sigBytes%4)for(let t=0;t<n.sigBytes;t++){const e=n.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=e<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<n.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=n.words[t>>>2];return this.sigBytes+=n.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new R([...this.words])}}const Ge={stringify(r){const n=[];for(let t=0;t<r.sigBytes;t++){const e=r.words[t>>>2]>>>24-t%4*8&255;n.push((e>>>4).toString(16),(e&15).toString(16))}return n.join("")}},Ve={stringify(r){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=[];for(let e=0;e<r.sigBytes;e+=3){const s=r.words[e>>>2]>>>24-e%4*8&255,i=r.words[e+1>>>2]>>>24-(e+1)%4*8&255,l=r.words[e+2>>>2]>>>24-(e+2)%4*8&255,d=s<<16|i<<8|l;for(let o=0;o<4&&e*8+o*6<r.sigBytes*8;o++)t.push(n.charAt(d>>>6*(3-o)&63))}return t.join("")}},Ye={parse(r){const n=r.length,t=[];for(let e=0;e<n;e++)t[e>>>2]|=(r.charCodeAt(e)&255)<<24-e%4*8;return new R(t,n)}},Je={parse(r){return Ye.parse(unescape(encodeURIComponent(r)))}};class Ze{constructor(){this._data=new R,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=512/32}reset(){this._data=new R,this._nDataBytes=0}_append(n){typeof n=="string"&&(n=Je.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes}_doProcessBlock(n,t){}_process(n){let t,e=this._data.sigBytes/(this.blockSize*4);n?e=Math.ceil(e):e=Math.max((e|0)-this._minBufferSize,0);const s=e*this.blockSize,i=Math.min(s*4,this._data.sigBytes);if(s){for(let l=0;l<s;l+=this.blockSize)this._doProcessBlock(this._data.words,l);t=this._data.words.splice(0,s),this._data.sigBytes-=i}return new R(t,i)}}class Xe extends Ze{update(n){return this._append(n),this._process(),this}finalize(n){n&&this._append(n)}}const ie=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Qe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],L=[];class et extends Xe{constructor(){super(...arguments),this._hash=new R([...ie])}reset(){super.reset(),this._hash=new R([...ie])}_doProcessBlock(n,t){const e=this._hash.words;let s=e[0],i=e[1],l=e[2],d=e[3],o=e[4],u=e[5],h=e[6],f=e[7];for(let c=0;c<64;c++){if(c<16)L[c]=n[t+c]|0;else{const w=L[c-15],z=(w<<25|w>>>7)^(w<<14|w>>>18)^w>>>3,x=L[c-2],I=(x<<15|x>>>17)^(x<<13|x>>>19)^x>>>10;L[c]=z+L[c-7]+I+L[c-16]}const g=o&u^~o&h,m=s&i^s&l^i&l,A=(s<<30|s>>>2)^(s<<19|s>>>13)^(s<<10|s>>>22),S=(o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25),_=f+S+g+Qe[c]+L[c],k=A+m;f=h,h=u,u=o,o=d+_|0,d=l,l=i,i=s,s=_+k|0}e[0]=e[0]+s|0,e[1]=e[1]+i|0,e[2]=e[2]+l|0,e[3]=e[3]+d|0,e[4]=e[4]+o|0,e[5]=e[5]+u|0,e[6]=e[6]+h|0,e[7]=e[7]+f|0}finalize(n){super.finalize(n);const t=this._nDataBytes*8,e=this._data.sigBytes*8;return this._data.words[e>>>5]|=128<<24-e%32,this._data.words[(e+64>>>9<<4)+14]=Math.floor(t/4294967296),this._data.words[(e+64>>>9<<4)+15]=t,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}}function tt(r){return new et().finalize(r).toString(Ve)}function st(r,n={}){const t=typeof r=="string"?r:qe(r,n);return tt(t).slice(0,10)}function nt(...r){return`${xe}${st([...r])}`}const rt={__name:"SeoRatingBubble",props:{rating:{type:String,required:!0}},setup(r){return{__sfc:!0,colorMap:{good:"green",ok:"orange",bad:"red"}}}};var it=function(){var n=this,t=n._self._c,e=n._self._setupProxy;return t("div",{staticClass:"ksr-mt-[0.375em] ksr-h-[12px] ksr-w-[12px] ksr-rounded-full",style:{backgroundColor:`var(--color-${e.colorMap[n.rating]??"gray"}-600)`}},[t("span",{staticClass:"ksr-sr-only"},[n._v(n._s(n.rating))])])},ot=[],at=P(rt,it,ot);const lt=at.exports,ct={__name:"SeoResultEntry",props:{result:{type:Object,required:!0},links:{type:Boolean,default:!0}},setup(r){const n=r,t=E(),e=T(()=>{const i=n.result.text.replace(/!$/,".");return n.links?i:s(i)});function s(i){return new DOMParser().parseFromString(i,"text/html").body.textContent||""}return{__sfc:!0,props:n,panel:t,parseText:e,stripTags:s,SeoRatingBubble:lt}}};var ut=function(){var n=this,t=n._self._c,e=n._self._setupProxy;return t("div",{staticClass:"ksr-flex ksr-items-start ksr-gap-2"},[t(e.SeoRatingBubble,{staticClass:"ksr-mx-1 ksr-shrink-0",attrs:{rating:n.result.rating}}),t("div",[t("div",{domProps:{innerHTML:n._s(e.parseText)}}),n.result.details?t("details",[t("summary",[n._v(n._s(e.panel.t("johannschopplich.seo-audit.issues")))]),t("div",{staticClass:"ksr-mb-1 ksr-rounded-[var(--rounded)] ksr-bg-[var(--color-border)] ksr-py-0.5",domProps:{innerHTML:n._s(n.result.details.text)}})]):n._e()])],1)},dt=[],ft=P(ct,ut,dt);const ht=ft.exports,oe={...ye},pt=Object.assign({inheritAttrs:!1},{__name:"SeoAudit",props:oe,setup(r){const n=r,t=E(),e=D(),s=Y(),i=ze(),{generateReport:l}=je(),{openLicenseModal:d}=_e({label:"Kirby SEO Audit",apiNamespace:"__seo-audit__"}),o=nt(t.view.path);let u;const h=v(),f=v(),c=v(),g=v(),m=v(),A=v(),S=v(),_=v(),k=v(),w=v(),z=v(),x=v(),I=v(!1),W=v(!1),H=v(),G=T(()=>s.getters["content/values"]()),ae=T(()=>f.value||G.value[c.value]||""),le=T(()=>{if(!g.value&&!m.value)return[];const p=g.value||G.value[m.value];return Array.isArray(p)?p:typeof p=="string"?p.split(",").map(b=>b.trim()):[]});pe(()=>t.language.code,()=>{V()}),V(!0);const{format:_t}=new Intl.DateTimeFormat(t.translation.code.replace("_","-"),{dateStyle:"short",timeStyle:"short"});async function V(p=!1){const{load:b}=he(),y=await b({parent:n.parent,name:n.name});if(p){if(h.value=ce(y.label)||t.t("johannschopplich.seo-audit.label"),c.value=y.keyphraseField,m.value=y.synonymsField,A.value=y.assessments,S.value=y.contentSelector,_.value=y.links,k.value=y.persisted,w.value=Ae.indexOf(y.config.logLevel??y.logLevel),z.value=y.config,x.value=y.license,Ce(y.assets),k.value){const F=JSON.parse(localStorage.getItem(o));F&&(H.value=F)}I.value=!0}f.value=y.keyphrase,g.value=y.synonyms,u=(await e.get(t.view.path,{select:"previewUrl"})).previewUrl}function ce(p){return!p||typeof p=="string"?p:p[t.translation.code]??Object.values(p)[0]}async function bt(){if(!u){t.notification.error(t.t("johannschopplich.seo-audit.error.missingPreviewUrl"));return}const p=u;t.isLoading=!0,W.value=!0;try{const b=await de(p),{htmlDocument:y,locale:C,title:F,description:kt}=await Ne(b),K=await l(y,S.value,{assessments:A.value,url:p,title:F,description:kt,langCulture:C,keyword:ae.value,synonyms:le.value});for(const fe of Object.keys(K))K[fe]=ue(K[fe]);H.value={result:K,timestamp:Date.now()},k.value&&localStorage.setItem(o,JSON.stringify(H.value))}catch(b){console.error(b),t.notification.error(t.t("johannschopplich.seo-audit.analyze.error"))}t.isLoading=!1,W.value=!1,t.notification.success({icon:"check",message:t.t("johannschopplich.seo-audit.analyze.success")})}function ue(p){return p.toSorted((b,y)=>b.rating==="feedback"?-1:y.rating==="feedback"?1:b.score<y.score?-1:1)}async function de(p){if(location.origin===new URL(p).origin){const C=await fetch(p);return C.ok||i.warn(`Response status code ${C.status} for URL ${p} is an indication that the error page is being analyzed.`),await C.text()}const{code:b,html:y}=await e.post("__seo-audit__/proxy",{url:p});return b!==200&&i.warn(`Response status code ${b} for URL ${p} is an indication that the error page is being analyzed.`),y}async function St(){const{isRegistered:p}=await d();p&&(x.value=!0)}return{__sfc:!0,propsDefinition:oe,props:n,panel:t,api:e,store:s,logger:i,generateReport:l,openLicenseModal:d,storageKey:o,previewUrl:u,label:h,keyphrase:f,keyphraseField:c,synonyms:g,synonymsField:m,assessments:A,contentSelector:S,links:_,persisted:k,logLevel:w,config:z,license:x,isInitialized:I,isGenerating:W,report:H,currentContent:G,resolvedKeyphrase:ae,resolvedSynonyms:le,format:_t,updateSectionData:V,t:ce,analyze:bt,sortResults:ue,fetchHtml:de,handleRegistration:St,SeoResultEntry:ht}}});var yt=function(){var n=this,t=n._self._c,e=n._self._setupProxy;return e.isInitialized?t("k-section",{attrs:{label:e.label}},[t("div",{staticClass:"ksr-space-y-4"},[t("k-button-group",{attrs:{layout:"collapsed"}},[t("k-button",{attrs:{icon:e.isGenerating?"loader":"seo-audit-analyze",text:e.panel.t("johannschopplich.seo-audit.analyze"),variant:"filled",size:"sm",theme:"positive",disabled:e.isGenerating},on:{click:function(s){return e.analyze()}}}),e.license===!1?[t("k-button",{attrs:{theme:"love",variant:"filled",size:"sm",link:"https://kirbyseo.com/buy",target:"_blank",text:e.panel.t("johannschopplich.seo-audit.license.buy")}}),t("k-button",{attrs:{theme:"love",variant:"filled",size:"sm",icon:"key",text:e.panel.t("johannschopplich.seo-audit.license.activate")},on:{click:function(s){return e.handleRegistration()}}})]:n._e()],2),e.report?t("div",[t("k-box",{class:[e.isGenerating&&"ksr-cusor-wait ksr-pointer-events-none ksr-animate-pulse"],staticStyle:{"--link-color":"var(--color-text)"},attrs:{theme:"passive"}},[t("k-text",{staticClass:"ksr-space-y-4",class:[e.isGenerating&&"ksr-opacity-50"]},[e.report.result.seo.length>0?t("div",n._l(e.report.result.seo,function(s,i){return t("div",{key:i},[t(e.SeoResultEntry,{attrs:{result:s,links:e.links}})],1)}),0):n._e(),e.report.result.readability.length>0?t("div",[t("k-label",{staticClass:"ksr-mb-1",style:{color:"var(--color-text)"}},[n._v(" "+n._s(e.panel.t("johannschopplich.seo-audit.readability"))+" ")]),n._l(e.report.result.readability,function(s,i){return t("div",{key:i},[t(e.SeoResultEntry,{attrs:{result:s,links:e.links}})],1)})],2):n._e()])],1),t("k-box",{staticClass:"ksr-border-transparent",attrs:{theme:"empty",icon:"clock"}},[n._v(" "+n._s(e.format(e.report.timestamp))+" ")])],1):n._e()],1)]):n._e()},gt=[],mt=P(pt,yt,gt);const vt=mt.exports;window.panel.plugin("johannschopplich/seo-audit",{sections:{"seo-audit":vt},icons:{"seo-audit-analyze":'<path d="M8 3a7 7 0 0 0 0 14h1.07a7.06 7.06 0 0 1 0-2H8A5 5 0 0 1 8 5h8a5 5 0 0 1 4.9 6a7.021 7.021 0 0 1 1.426 2A7 7 0 0 0 16 3zm8 10a3 3 0 1 0 0 6a3 3 0 0 0 0-6m-5 3a5 5 0 1 1 9.172 2.757l2.535 2.536l-1.414 1.414l-2.536-2.535A5 5 0 0 1 11 16" />'}})})();
